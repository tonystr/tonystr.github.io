{"version":3,"sources":["components/Ribbons.jsx","components/Header.jsx","pages/Minesweeper.jsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/class-names/index.js","../node_modules/classnames/index.js"],"names":["Ribbons","props","className","to","href","target","rel","Header","src","window","location","origin","toString","alt","gridFindValue","grid","rx","ry","rw","rh","val","y","Math","max","min","x","undefined","value","gridGenerate","width","height","bombCount","defCell","hidden","flag","Array","from","length","floor","random","map","row","cell","Stopwatch","stop","useState","time","setTime","useEffect","setTimeout","TableContent","placeFlag","flagCount","gameState","setGameState","setFlagCount","setGrid","prev","touchCell","mutGrid","sum","aroundCell","func","ym","xm","special","cellVal","fill","a","i","createHandleClick","ctrl","handleSuccess","newShowCount","showCount","mgc","JSON","parse","stringify","setShowCount","gr","gridIsSolved","ax","ay","classNames","onClick","onContextMenu","Minesweeper","round","setCtrl","gameRef","React","useRef","ev","e","preventDefault","gameRefCurrent","current","addEventListener","kde","keyCode","kue","removeEventListener","ref","Counter","role","toggle","title","setToggle","children","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","isArray","F","s","n","done","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","module","exports","require","hasOwn","hasOwnProperty","classes","arguments","arg","argType","push","inner","apply","Object","prototype","key","call","join","default"],"mappings":"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","file":"static/js/11.b8bf4267.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport '../styles/ribbons.scss';\r\n\r\nexport default function Ribbons(props) {\r\n    return (\r\n        <ul className='ribbons'>\r\n            <Link to='/'><li className='l0'><i className='far fa-id-card' /></li></Link>\r\n            <Link to='/articles'><li className='l1'><i className='fas fa-file-invoice' /></li></Link>\r\n            <Link to='/snippets'><li className='l2'><i className='fas fa-code' /></li></Link>\r\n            <a href='https://github.com/tonystr' target='_blank' rel='noopener noreferrer'>\r\n                <li className='l3'><i className='fab fa-github' /></li>\r\n            </a>\r\n            <a href='https://twitter.com/TonyStr_' target='_blank' rel='noopener noreferrer'>\r\n                <li className='l4'><i className='fab fa-twitter' /></li>\r\n            </a>\r\n        </ul>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport Ribbons from './Ribbons.jsx';\r\nimport '../styles/header.scss';\r\n\r\nexport default function Header(props) {\r\n    // let rootURL = `${window.location.protocol}//${window.location.hostname}:${window.location.port}`;\r\n    // rootURL = rootURL.replace('localhost', '127.0.0.1');\r\n    return (\r\n        <header>\r\n            <Ribbons />\r\n            <div className='tony'>\r\n                <img\r\n                    src={`${window.location.origin.toString()}/images/window.png`}\r\n                    alt='Window Icon'\r\n                />\r\n                Tony Strømsnæs\r\n            </div>\r\n        </header>\r\n    );\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport classNames from 'class-names';\r\nimport Header from '../components/Header.jsx';\r\nimport '../styles/minesweeper.scss';\r\n\r\nfunction gridFindValue(grid, rx, ry, rw, rh) {\r\n    let val = 0;\r\n    for (let y = Math.max(ry - 1, 0); y < Math.min(ry + 2, rh); y++) {\r\n        for (let x = Math.max(rx - 1, 0); x < Math.min(rx + 2, rw); x++) {\r\n            if ((x === rx && y === ry) || grid[y] === undefined) continue;\r\n            if (grid[y][x].value === 9) val++;\r\n        }\r\n    }\r\n    return val;\r\n}\r\n\r\nfunction gridGenerate(width, height, bombCount) {\r\n    const defCell = {\r\n        hidden: true,\r\n        flag: false,\r\n        value: 0\r\n    };\r\n\r\n    let grid = Array.from(\r\n        { length: height }, () => Array.from(\r\n            { length: width }, () => ({\r\n                ...defCell,\r\n                value: 0\r\n            })\r\n        )\r\n    );\r\n\r\n    while (bombCount > 0) {\r\n        const x = Math.floor(Math.random() * width);\r\n        const y = Math.floor(Math.random() * height);\r\n        if (grid[y][x].value === 0) {\r\n            grid[y][x].value = 9;\r\n            bombCount--;\r\n        }\r\n    }\r\n\r\n    grid = grid.map((row, ry) => row.map((cell, rx) => (cell.value === 0 ?\r\n        { ...cell, value: gridFindValue(grid, rx, ry, width, height) } :\r\n        cell\r\n    )));\r\n\r\n    return grid;\r\n}\r\n\r\nfunction Stopwatch({ stop }) {\r\n    const [time, setTime] = useState(0);\r\n\r\n    useEffect(() => {\r\n        if (!stop) setTimeout(() => setTime(time + 1), 1000);\r\n    }, [time, stop]);\r\n\r\n    if (time < 60) {\r\n        return `${time}`;\r\n    } else if (time < 3600) {\r\n        return `${Math.floor(time / 60)}:${time % 60}`;\r\n    } else {\r\n        return `${Math.floor(time / 3600)}:${Math.floor(time / 60) % 60}:${time % 60}`;\r\n    }\r\n}\r\n\r\nfunction gridIsSolved(gr) {\r\n    for (let row of gr) {\r\n        for (let cell of row) {\r\n            if (cell.hidden && cell.value < 9) return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction TableContent(props) {\r\n\r\n    const placeFlag = (rx, ry) => {\r\n        if (!props.grid[ry][rx].hidden) return;\r\n        if (!props.grid[ry][rx].flag && props.flagCount <= 0) return;\r\n        if (props.gameState !== 'playing') props.setGameState('playing');\r\n\r\n        props.setFlagCount(props.flagCount + props.grid[ry][rx].flag - !props.grid[ry][rx].flag);\r\n        props.setGrid(prev => prev.map((row, y) => row.map((cell, x) => x === rx && y === ry ?\r\n            { ...cell, flag: !cell.flag } :\r\n            cell\r\n        )));\r\n\r\n        return false;\r\n    }\r\n\r\n    const touchCell = (mutGrid, rx, ry, rw = props.width, rh = props.height) => {\r\n        let sum = mutGrid[ry][rx].hidden !== false;\r\n        mutGrid[ry][rx].hidden = false;\r\n        if (mutGrid[ry][rx].value < 1) aroundCell(rx, ry, (x, y) => {\r\n            if (mutGrid[y][x].hidden && !mutGrid[y][x].flag) {\r\n                sum += touchCell(mutGrid, x, y, rw, rh);\r\n            }\r\n        });\r\n        return sum;\r\n    };\r\n\r\n    const aroundCell = (rx, ry, func, rw = props.width, rh = props.height) => {\r\n        const ym = Math.min(ry + 2, rh);\r\n        const xm = Math.min(rx + 2, rw);\r\n        for (let y = Math.max(ry - 1, 0); y < ym; y++) {\r\n            for (let x = Math.max(rx - 1, 0); x < xm; x++) {\r\n                if (x !== rx || y !== ry) {\r\n                    func(x, y);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    const special = { 0: ' ', 9: '💣', 10: '💥' };\r\n    const cellVal = new Array(11).fill().map((a, i) => special[i] || i);\r\n\r\n    const createHandleClick = (rx, ry, cell) => {\r\n        if (props.gameState === 'lost') return undefined;\r\n        if (props.ctrl) return () => placeFlag(rx, ry);\r\n        if (cell.flag) return undefined;\r\n\r\n        const handleSuccess = () => {\r\n            if (props.gameState === 'waiting') props.setGameState('playing');\r\n\r\n            props.setGrid(mutGrid => {\r\n                let newShowCount = props.showCount;\r\n                if (cell.value >= 1) {\r\n                    mutGrid = props.grid.map((row, y) => row.map((mgc, x) => x === rx && y === ry ?\r\n                        { ...mgc, hidden: false } :\r\n                        mgc\r\n                    ));\r\n                    newShowCount = props.showCount + 1;\r\n                } else {\r\n                    mutGrid = JSON.parse(JSON.stringify(props.grid));\r\n                    newShowCount = props.showCount + touchCell(mutGrid, rx, ry);\r\n                }\r\n\r\n                props.setShowCount(newShowCount);\r\n                if (props.width * props.height - newShowCount <= props.bombCount && gridIsSolved(mutGrid)) {\r\n                    props.setGameState('won');\r\n                }\r\n                return mutGrid;\r\n            });\r\n        };\r\n\r\n        if (cell.value === 9) return () => {\r\n            if (props.gameState === 'waiting') {\r\n                props.setGameState('playing');\r\n                props.setGrid(mutGrid => {\r\n                    mutGrid[ry][rx].value = 0;\r\n                    aroundCell(rx, ry, (x, y) => {\r\n                        const val = mutGrid[y][x].value;\r\n                        if (val > 0 && val < 9) mutGrid[y][x].value--\r\n                        return mutGrid;\r\n                    });\r\n                    while (true) {\r\n                        const x = Math.floor(Math.random() * props.width);\r\n                        const y = Math.floor(Math.random() * props.height);\r\n                        if (mutGrid[y][x].value > 8 || (x === rx && y === ry)) continue;\r\n                        mutGrid[y][x].value = 9;\r\n                        aroundCell(x, y, (ax, ay) => {\r\n                            if (mutGrid[ay][ax].value < 9) mutGrid[ay][ax].value++\r\n                            return mutGrid;\r\n                        });\r\n\r\n                        let sum = 0;\r\n                        aroundCell(rx, ry, (x, y) => {\r\n                            sum += mutGrid[y][x].value === 9;\r\n                        });\r\n                        mutGrid[ry][rx].value = sum;\r\n                        return mutGrid;\r\n                    }\r\n                });\r\n                return handleSuccess();\r\n            }\r\n            props.setGrid(mutGrid => {\r\n                mutGrid[ry][rx].value++;\r\n                return mutGrid;\r\n            });\r\n            props.setGameState('lost');\r\n        };\r\n\r\n        return handleSuccess;\r\n    }\r\n\r\n    return props.grid.map((row, ry) => (\r\n        <tr key={ry}>\r\n            {row.map((cell, rx) => (\r\n                <td\r\n                    key={rx}\r\n                    className={classNames({\r\n                        'hidden':            cell.hidden,\r\n                        [`c-${cell.value}`]: cell.value >= 1 && (!cell.hidden || props.gameState === 'lost'),\r\n                        'flag-wrong':        props.gameState === 'lost' && cell.flag && cell.value !== 9\r\n                    })}\r\n                    onClick={createHandleClick(rx, ry, cell)}\r\n                    onContextMenu={() => props.gameState !== 'lost' && placeFlag(rx, ry)}\r\n                >\r\n                    {(\r\n                        cell.flag && <i className='far fa-flag' />\r\n                    ) || (\r\n                        (!cell.hidden || (props.gameState === 'lost' && cell.value > 8)) && (cellVal[cell.value] || cell.value)\r\n                    )}\r\n                </td>\r\n            ))}\r\n        </tr>\r\n    ));\r\n}\r\n\r\nexport default function Minesweeper() {\r\n    const width  = 46;\r\n    const height = 21;\r\n    const bombCount = Math.round(width * height * .2);\r\n\r\n    const [grid,      setGrid     ] = useState(gridGenerate(width, height, bombCount));\r\n    const [gameState, setGameState] = useState('waiting');\r\n    const [flagCount, setFlagCount] = useState(bombCount);\r\n    const [showCount, setShowCount] = useState(0);\r\n    const [ctrl,      setCtrl     ] = useState(false);\r\n\r\n    const gameRef = React.useRef();\r\n    // const cellVal = [' ', '一', '二', '三', '四', '五', '六', '七', '八', '💣', '💥'];\r\n\r\n    useEffect(() => {\r\n        const ev = e => e.preventDefault() && false;\r\n        const gameRefCurrent = gameRef.current;\r\n        gameRefCurrent.addEventListener('contextmenu', ev);\r\n        const kde = window.addEventListener('keydown', e => e.keyCode === 17 && setCtrl(true));\r\n        const kue = window.addEventListener('keyup',   e => e.keyCode === 17 && setCtrl(false));\r\n        return () => {\r\n            gameRefCurrent.removeEventListener('contextmenu', ev);\r\n            window.removeEventListener('keydown', kde);\r\n            window.removeEventListener('keyup', kue);\r\n        }\r\n    }, []);\r\n\r\n    const gameRestart = () => {\r\n        setGrid(gridGenerate(width, height, bombCount));\r\n        setGameState('waiting');\r\n        setFlagCount(bombCount);\r\n        setShowCount(0);\r\n        setCtrl(false);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <div\r\n                className={`minesweeper ${gameState}`}\r\n                ref={gameRef}\r\n            >\r\n                <table className='game-grid'>\r\n                    <tbody>\r\n                        <TableContent\r\n                            grid={grid}\r\n                            setGrid={setGrid}\r\n                            flagCount={flagCount}\r\n                            setFlagCount={setFlagCount}\r\n                            gameState={gameState}\r\n                            setGameState={setGameState}\r\n                            showCount={showCount}\r\n                            setShowCount={setShowCount}\r\n                            width={width}\r\n                            height={height}\r\n                            bombCount={bombCount}\r\n                            ctrl={ctrl}\r\n                        />\r\n                    </tbody>\r\n                </table>\r\n                <div className='infobar'>\r\n                    <Counter className='flagcount'>\r\n                        Flags: <span>{flagCount} <i className='far fa-flag' /></span>\r\n                    </Counter>\r\n                    <Counter className='bombcount'>\r\n                        Bombs: <span>{bombCount - flagCount} <span role='img' aria-label='bomb'>💣</span></span>\r\n                    </Counter>\r\n                    <Counter className='grid-size'>\r\n                        Grid: <span>{width} × {height}</span>\r\n                    </Counter>\r\n                    <Counter className='stopwatch' toggle={true}>\r\n                        Time: <span className={gameState !== 'playing' ? 'stop' : ''}>\r\n                            <Stopwatch stop={gameState !== 'playing'} />\r\n                        </span>\r\n                    </Counter>\r\n                    <div\r\n                        className='counter'\r\n                        title='restart'\r\n                        onClick={gameRestart}\r\n                    >\r\n                        <i className=\"fas fa-redo\"/>\r\n                    </div>\r\n                    {gameState === 'won' && <div> You win! </div>}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction Counter(props) {\r\n    const [toggle, setToggle] = useState(props.toggle || false);\r\n\r\n    return (\r\n        <div\r\n            className={classNames(props.className, 'counter', { toggle: toggle })}\r\n            onClick={e => {\r\n                setToggle(!toggle)\r\n                if (props.onClick) props.onClick(e);\r\n            }}\r\n        >\r\n            {props.children}\r\n        </div>\r\n    );\r\n}\r\n","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","module.exports = require('classnames');\n","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n"],"sourceRoot":""}