(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{446:function(e,t,n){},463:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return w});var r=n(59),o=n(14),a=n(0),i=n.n(a),c=n(42),u=n(78),s=n.n(u),l=(n(446),n(106)),d=n.n(l),h=1296;function f(e,t){var n=e.target,r=document.getElementById("canvas").getContext("2d");console.log(e);var o=void 0!==e.clientX?e.clientX:e.touches[0].clientX,a=void 0!==e.clientY?e.clientY:e.touches[0].clientY;if(void 0===n||"CANVAS"!==n.tagName)return!1;var i=n.getBoundingClientRect(),c=o-i.x,u=a-i.y,s=window.mousePrevious.down?window.mousePrevious.x:c,l=window.mousePrevious.down?window.mousePrevious.y:u;return r.beginPath(),r.lineWidth=8,r.strokeStyle="#ffffff",r.lineCap="round",r.moveTo(s,l),r.lineTo(c,u),r.stroke(),(Math.abs(c-s)>3||Math.abs(u-l)>3)&&t(function(e){var t=e.map(function(e){return e.slice()});return t[t.length-1].push({x:Math.floor(c/i.width*h),y:Math.floor(u/i.height*h)}),t}),window.mousePrevious={x:c,y:u,down:!0},!0}function m(e){var t=e.toString(36);return 1===t.length?"0"+t:t}function v(e){var t=e.kanji;return i.a.createElement("div",{className:"inspector"},i.a.createElement("div",{className:"foc"},["number","character","radical","stroke-count","meaning","reading"].map(function(e,n){return i.a.createElement("div",{className:e,key:e},t[n])})))}function w(){var e=Object(a.useState)({width:window.innerHeight-374,height:window.innerHeight-374}),t=Object(o.a)(e,2),n=t[0],u=t[1],l=Object(a.useState)([]),h=Object(o.a)(l,2),w=h[0],g=h[1],p=Object(a.useState)(0),b=Object(o.a)(p,2),E=b[0],j=b[1],y=Object(a.useState)([]),O=Object(o.a)(y,2),k=O[0],N=O[1],x=Object(a.useState)(null),S=Object(o.a)(x,2),C=S[0],P=S[1],L=Object(a.useState)(!1),M=Object(o.a)(L,2),H=M[0],A=M[1];Object(a.useEffect)(function(){var e=function(){return u({width:window.innerHeight-374,height:window.innerHeight-374})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]),Object(a.useEffect)(function(){if(!(E<=0)){var e=w.reduce(function(e,t){return t.length?e+t.reduce(function(e,t){return e+m(t.x)+m(t.y)},"")+"\n":e},H?"HL ":"hL ");fetch("https://urlreq.appspot.com/req?method=POST&url=https://kanji.sljfaq.org/hw-17.cgi&body=".concat(encodeURIComponent(e))).then(function(e){return!e.bodyUsed&&e.text().then(function(e){console.log(e);try{var t=JSON.parse(e);if(!t.results||!t.results.length)throw"No results";N(t.results)}catch(n){console.error(n)}})})}},[E,H]);var T=function(e){return f(e,g)},q=function e(){window.mousePrevious.down=!1,j(function(e){return e+1}),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",e)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(c.default,null),i.a.createElement("div",{className:"kanji-page"},i.a.createElement("div",{className:"canvas-container",width:n.width,height:n.height},i.a.createElement("canvas",{id:"canvas",className:"kanji-canvas",width:n.width-11,height:n.height-11,onMouseDown:function(e){g(function(e){return[].concat(Object(r.a)(e.map(function(e){return e.slice()})),[[]])}),f(e,g),document.addEventListener("mousemove",T),document.addEventListener("mouseup",q)},onTouchStart:function(e){g(function(e){return[].concat(Object(r.a)(e.map(function(e){return e.slice()})),[[]])}),f(e,g),document.addEventListener("touchmove",T),document.addEventListener("touchend",q)},onClick:function(e){f(e,g),window.mousePrevious.down=!1}}),i.a.createElement("div",{className:"controls"},i.a.createElement("i",{title:"Clear",className:"fas fa-redo",onClick:function(){var e=document.getElementById("canvas");e.getContext("2d").clearRect(0,0,e.width,e.height),g([]),j(0)}}),i.a.createElement("i",{title:H?"Match by image":"Match by stroke",className:"fas fa-".concat(H?"random":"paint-brush"),onClick:function(){return A(function(e){return!e})}}))),i.a.createElement("div",{className:"results",style:{width:Math.min(window.innerWidth-n.width,500),height:n.height}},i.a.createElement("div",{className:s()("search-results",{small:!!C})},k.map(function(e,t){return i.a.createElement("span",{key:t,onClick:function(){return P(d.a.find(function(t){return t[1]===e}))}},e)})),C&&i.a.createElement(v,{kanji:C}))))}window.mousePrevious={x:null,y:null,down:!1}},78:function(e,t,n){e.exports=n(79)},79:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)&&r.length){var i=o.apply(null,r);i&&e.push(i)}else if("object"===a)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()}}]);
//# sourceMappingURL=15.fd9fd859.chunk.js.map