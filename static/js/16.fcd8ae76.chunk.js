/*! For license information please see 16.fcd8ae76.chunk.js.LICENSE.txt */
(this["webpackJsonptonystr.github.io"]=this["webpackJsonptonystr.github.io"]||[]).push([[16],{457:function(e,t,n){},474:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var i=n(54),r=n(14),o=n(0),c=n(43),s=n(81),u=n.n(s),a=(n(457),n(112)),d=n.n(a),l=n(1);function h(e,t){var n=e.target,i=document.getElementById("canvas").getContext("2d");console.log(e);var r=void 0!==e.clientX?e.clientX:e.touches[0].clientX,o=void 0!==e.clientY?e.clientY:e.touches[0].clientY;if(void 0===n||"CANVAS"!==n.tagName)return!1;var c=n.getBoundingClientRect(),s=r-c.x,u=o-c.y,a=window.mousePrevious.down?window.mousePrevious.x:s,d=window.mousePrevious.down?window.mousePrevious.y:u;return i.beginPath(),i.lineWidth=8,i.strokeStyle="#ffffff",i.lineCap="round",i.moveTo(a,d),i.lineTo(s,u),i.stroke(),(Math.abs(s-a)>3||Math.abs(u-d)>3)&&t((function(e){var t=e.map((function(e){return e.slice()}));return t[t.length-1].push({x:Math.floor(s/c.width*1296),y:Math.floor(u/c.height*1296)}),t})),window.mousePrevious={x:s,y:u,down:!0},!0}function f(e){var t=e.toString(36);return 1===t.length?"0"+t:t}function v(e){var t=e.kanji;return Object(l.jsx)("div",{className:"inspector",children:Object(l.jsx)("div",{className:"foc",children:["number","character","radical","stroke-count","meaning","reading"].map((function(e,n){return Object(l.jsx)("div",{className:e,children:t[n]},e)}))})})}function m(){var e=Object(o.useState)({width:window.innerHeight-374,height:window.innerHeight-374}),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(o.useState)([]),m=Object(r.a)(a,2),j=m[0],w=m[1],b=Object(o.useState)(0),g=Object(r.a)(b,2),p=g[0],O=g[1],x=Object(o.useState)([]),y=Object(r.a)(x,2),k=y[0],N=y[1],S=Object(o.useState)(null),E=Object(r.a)(S,2),C=E[0],P=E[1],L=Object(o.useState)(!1),M=Object(r.a)(L,2),H=M[0],A=M[1];Object(o.useEffect)((function(){var e=function(){return s({width:window.innerHeight-374,height:window.innerHeight-374})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(o.useEffect)((function(){if(!(p<=0)){var e=j.reduce((function(e,t){return t.length?e+t.reduce((function(e,t){return e+f(t.x)+f(t.y)}),"")+"\n":e}),H?"HL ":"hL ");fetch("https://urlreq.appspot.com/req?method=POST&url=https://kanji.sljfaq.org/hw-17.cgi&body=".concat(encodeURIComponent(e))).then((function(e){return!e.bodyUsed&&e.text().then((function(e){console.log(e);try{var t=JSON.parse(e);if(!t.results||!t.results.length)throw new Error("No results");N(t.results)}catch(n){console.error(n)}}))}))}}),[p,H]);var T=function(e){return h(e,w)},q=function e(){window.mousePrevious.down=!1,O((function(e){return e+1})),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",e)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(c.default,{}),Object(l.jsxs)("div",{className:"kanji-page",children:[Object(l.jsxs)("div",{className:"canvas-container",width:n.width,height:n.height,children:[Object(l.jsx)("canvas",{id:"canvas",className:"kanji-canvas",width:n.width-11,height:n.height-11,onMouseDown:function(e){w((function(e){return[].concat(Object(i.a)(e.map((function(e){return e.slice()}))),[[]])})),h(e,w),document.addEventListener("mousemove",T),document.addEventListener("mouseup",q)},onTouchStart:function(e){w((function(e){return[].concat(Object(i.a)(e.map((function(e){return e.slice()}))),[[]])})),h(e,w),document.addEventListener("touchmove",T),document.addEventListener("touchend",q)},onClick:function(e){h(e,w),window.mousePrevious.down=!1}}),Object(l.jsxs)("div",{className:"controls",children:[Object(l.jsx)("i",{title:"Clear",className:"fas fa-redo",onClick:function(){var e=document.getElementById("canvas");e.getContext("2d").clearRect(0,0,e.width,e.height),w([]),O(0)}}),Object(l.jsx)("i",{title:H?"Match by image":"Match by stroke",className:"fas fa-".concat(H?"random":"paint-brush"),onClick:function(){return A((function(e){return!e}))}})]})]}),Object(l.jsxs)("div",{className:"results",style:{width:Math.min(window.innerWidth-n.width,500),height:n.height},children:[Object(l.jsx)("div",{className:u()("search-results",{small:!!C}),children:k.map((function(e,t){return Object(l.jsx)("span",{onClick:function(){return P(d.a.find((function(t){return t[1]===e})))},children:e},t)}))}),C&&Object(l.jsx)(v,{kanji:C})]})]})]})}window.mousePrevious={x:null,y:null,down:!1}},81:function(e,t,n){e.exports=n(82)},82:function(e,t,n){var i;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i)){if(i.length){var c=r.apply(null,i);c&&e.push(c)}}else if("object"===o)if(i.toString===Object.prototype.toString)for(var s in i)n.call(i,s)&&i[s]&&e.push(s);else e.push(i.toString())}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(i=function(){return r}.apply(t,[]))||(e.exports=i)}()}}]);
//# sourceMappingURL=16.fcd8ae76.chunk.js.map