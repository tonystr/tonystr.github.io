
<!DOCTYPE html>

<head>
<title>Word cube generator</title>
<script type="text/javascript" async
src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
</head>
<body>
	<p>
	  $$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$
	</p>
<style>
body {
	margin: 0;
	background: #eff0f1;
}
#app {
	width: 640px;
	margin: 0 auto;
	background: white;
	min-height: 100%;
	padding: 4px;
	box-sizing: border-box;
	font: 10pt sans-serif;
}
input[type="text"], textarea {
	width: 100%;
	box-sizing: border-box;
	font: 10pt monospace;
}
</style>
<div id="app">
<h1>
	Word Cube Generator
</h1><p>
	Input text (length: <span id="length">0</span>):
</p>
<!--А КАК ЖЕ ПРАВИЛА-->
<input type="text" id="input" value="0123456789ABCDEFGHIJ">
<p>
	<input type="button" id="proc1" value="One-side">
	Must start and end with the same character.
</p><p>
	<input type="button" id="proc2" value="Two-side">
	Must have odd length (3, 5, 7, 9, etc.)
</p><!--<p>
	<input type="button" id="proc4" value="Four-side">
	Preferably a multiplier-of-four length.
</p>-->
<textarea rows="15" id="output"></textarea>

<script>
    var input = document.getElementById("input");
    var inputLen = document.getElementById("length");
    function updateLen() {
    	setTimeout(function() {
    		inputLen.innerHTML = "" + input.value.length;
    	});
    }
    input.onkeydown = updateLen;
    input.onkeyup = updateLen;
    input.onchange = updateLen;
    var output = document.getElementById("output");
    function proc(s, m) {
    	var r = "";
    	var n = s.length;
    	if (m == 2) n = Math.ceil(n / 2);
    	if (m == 4) n = Math.ceil(n / 4) + 1;
    	var l = n - 1;
    	var h = Math.floor(n / 2);
    	var w = h + n;
    	var r = [];
    	function set(x, y, v) {
    		r[y][x] = v;
    	}
    	function seti(x, y, i) {
    		if (i >= 0 && i < s.length) r[y][x] = s[i];
    	}
    	for (var i = 0; i < w; i++) {
    		r[i] = [];
    		for (var k = 0; k < w; k++) r[i][k] = " ";
    	}
    	for (var i = 0; i <= h; i++) {
    		r[h-i][i] = "/";
    		r[h-i][i+l] = "/";
    		r[h+l-i][i] = "/";
    		r[h+l-i][i+l] = "/";
    	}
    	for (var i = 0; i < n; i++) {
    		var it = i, ir = i, ib = i, il = i;
    		if (m == 2) {
    			ir = l + i;
    			ib = l + i;
    		} else if (m == 4) {
    			ir = l + i;
    			ib = l * 3 - i;
    			il = l * 4 - i;
    		}

    		// back side:
    		seti(h + i, 0, it); // top
    		seti(h, i, il); // left
    		seti(h + l, i, ir); // right
    		seti(h + i, l, ib); // bottom

    		//
    		if (m == 4) {
    			ib = i;
    			ir = l * 2 - i;
    			il = -1;
    			it = -1;
    			//ib = l * 3 - i;
    			//il = l * 4 - i;
    		}

    		// front side:
    		seti(i, h, it); // top
    		seti(0, h + i, il); // left
    		seti(l, h + i, ir); // right
    		seti(i, h + l, ib); // bottom
    	}
    	for (var i = 0; i < r.length; i++) r[i] = r[i].join(" ");
    	output.value = r.join("\n");
    }
    document.getElementById("proc1").onclick = function(_) { proc(input.value, 1) };
    document.getElementById("proc2").onclick = function(_) { proc(input.value, 2) };
    document.getElementById("proc4").onclick = function(_) { proc(input.value, 4) };
</script>
</div>
</body>
